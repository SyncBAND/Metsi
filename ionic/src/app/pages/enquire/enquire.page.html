<ion-header>
  <ion-toolbar>
    <ion-title>Enquiry</ion-title>
    <ion-buttons slot="start">
      <ion-button horizontal="end" fill="clear" size="small" (click)="back()">
        <ion-icon slot="end" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>
 
  <ion-card>
      <form [formGroup]="enquiryForm" (ngSubmit)="sendEnquiry()" novalidate style="padding: 20px;">
    
          <ion-list padding>
            
            <ion-item>
              <ion-label style="font-weight: bold">
                What is the problem? *
              </ion-label>
            </ion-item>
            <ion-item style="margin-left: 15px;">
              <ion-label>Problem</ion-label>
              <ion-select interface="popover" #a (keyup.enter)="moveFocus(b)" formControlName="problem" >
                <ion-select-option required *ngFor="let problem of problems" value="{{problem}}">
                  {{problem}}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <span class="error ion-padding" style="color: red;" *ngIf="isSubmitted && errorControl.problem.errors?.required">
              Problem required.
            </span>
            <br/>

            <ion-item>
              <ion-label style="font-weight: bold">
                How severe is the damage? *
              </ion-label>
            </ion-item>
            <ion-item style="margin-left: 15px;">
              <ion-label>
                Severe
              </ion-label>
              <ion-select interface="popover" #b (keyup.enter)="moveFocus(c)" formControlName="severity" >
                <ion-select-option required *ngFor="let severe of severity" value="{{severe}}">
                  {{severe}}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <span class="error ion-padding" style="color: red; margin-left: 15px;" *ngIf="isSubmitted && errorControl.severity.errors?.required">
              Severity required.
            </span>
            <br/>

            <ion-item>
              <ion-label style="font-weight: bold">
                Where is the fault positioned? *
              </ion-label>
            </ion-item>
            <ion-item style="margin-left: 15px;">
              <ion-label>
                Position
              </ion-label>
              <ion-select interface="popover" #c (keyup.enter)="moveFocus(d)" formControlName="position" >
                <ion-select-option required *ngFor="let position of positions" value="{{position}}">
                  {{position}}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <span class="error ion-padding" style="color: red; margin-left: 15px;" *ngIf="isSubmitted && errorControl.position.errors?.required">
              Position required.
            </span>
            <br/>

            <ion-item>
              <ion-label style="font-weight: bold">
                Type of area *
              </ion-label>
            </ion-item>
            <ion-item style="margin-left: 15px;">
              <ion-label>
                Area
              </ion-label>
              <ion-select interface="popover" #d (keyup.enter)="moveFocus(e)" formControlName="area" >
                <ion-select-option required *ngFor="let area of areas" value="{{area}}">
                  {{area}}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <span class="error ion-padding" style="color: red; margin-left: 15px;" *ngIf="isSubmitted && errorControl.area.errors?.required">
              Area required.
            </span>
            <br/>

            <ion-item>
              <ion-label style="font-weight: bold">Describe the problem</ion-label>
            </ion-item>
            <ion-item style="margin-left: 15px;">
              <ion-textarea placeholder="Optional" #e (keyup.enter)="moveFocus(f)" formControlName="description" rows="3"></ion-textarea>
            </ion-item>
            <br/>


            <ion-item>
              <ion-label style="font-weight: bold">Images of problem</ion-label>
            </ion-item>

              <ion-row>
                
                <ion-col size="6" (click)="capture('1')">
                  <ion-card style="height: unset">
                    <ion-card-content *ngIf="utils.platformIs == 'mobile'" style="text-align: center; background-color: whitesmoke; max-height: 150px; min-height: 150px;">
                      <img [src]="event.photo_1" style="width: 100px; height: 100px; margin: auto;">
                    </ion-card-content>
                    <ion-card-content *ngIf="utils.platformIs != 'mobile'" style="text-align: center; background-color: whitesmoke; height: 300px">
                      <img [src]="event.photo_1" style="width: 200px; margin: auto;">
                    </ion-card-content>
                  </ion-card>
                </ion-col>

                <ion-col size="6" (click)="capture('2')">
                  <ion-card style="height: unset">
                    <ion-card-content *ngIf="utils.platformIs == 'mobile'" style="text-align: center; background-color: whitesmoke; max-height: 150px; min-height: 150px;">
                      <img [src]="event.photo_2" style="width: 100px; height: 100px; margin: auto;">
                    </ion-card-content>
                    <ion-card-content *ngIf="utils.platformIs != 'mobile'" style="text-align: center; background-color: whitesmoke; height: 300px">
                      <img [src]="event.photo_2" style="width: 200px; margin: auto;">
                    </ion-card-content>
                  </ion-card>
                </ion-col>
                
                <ion-col size="6" (click)="capture('3')">
                  <ion-card style="height: unset">
                    <ion-card-content *ngIf="utils.platformIs == 'mobile'" style="text-align: center; background-color: whitesmoke; max-height: 150px; min-height: 150px;">
                      <img [src]="event.photo_3" style="width: 100px; height: 100px; margin: auto;">
                    </ion-card-content>
                    <ion-card-content *ngIf="utils.platformIs != 'mobile'" style="text-align: center; background-color: whitesmoke; height: 300px">
                      <img [src]="event.photo_3" style="width: 200px; margin: auto;">
                    </ion-card-content>
                  </ion-card>
                </ion-col>

                <ion-col size="6" (click)="capture('4')">
                  <ion-card style="height: unset">
                    <ion-card-content *ngIf="utils.platformIs == 'mobile'" style="text-align: center; background-color: whitesmoke; max-height: 150px; min-height: 150px;">
                      <img [src]="event.photo_4" style="width: 100px; height: 100px; margin: auto;">
                    </ion-card-content>
                    <ion-card-content *ngIf="utils.platformIs != 'mobile'" style="text-align: center; background-color: whitesmoke; height: 300px">
                      <img [src]="event.photo_4" style="width: 200px; margin: auto;">
                    </ion-card-content>
                  </ion-card>
                </ion-col>
            
              </ion-row>
            <br/>

            <ion-item>
              <ion-label style="font-weight: bold">Where should we find you? *</ion-label>
            </ion-item>
            <div style="text-align: center">
              <ion-button (click)="getLocation()" #f (keyup.enter)="moveFocus(h)" color="light" style="width: 100%;">
                Send us your location
                <ion-icon slot="end" name="locate-outline"></ion-icon>
              </ion-button>
            </div>

            <br/>
            <ion-item style="margin-left: 15px;">
              <ion-textarea (click)="getAddressModal()" #h (keyup.enter)="moveFocus(i)" readonly placeholder="Or enter the location here" formControlName="location" rows="3"></ion-textarea>
            </ion-item>
            <br/>

            <ion-item>
              <ion-label style="font-weight: bold; white-space: break-spaces;">
                Who would best fix the problem?
              </ion-label>
            </ion-item>
            <ion-item style="margin-left: 15px;">
              <ion-label>
                Type of agent
              </ion-label>
              <ion-select interface="popover" #i (keyup.enter)="sendEnquiry()" formControlName="skill_needed" >
                <ion-select-option required *ngFor="let skill_needed of skills" value="{{skill_needed}}">
                  {{skill_needed}}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <span class="error ion-padding" style="color: red; margin-left: 15px;" *ngIf="isSubmitted && errorControl.skill_needed.errors?.required">
              Type of agent required.
            </span>
            <br/>
            <br/>

            <div style="text-align: center">
              <ion-button color="success" type="submit"> Report </ion-button>
            </div>
          
          </ion-list>

      </form>
  </ion-card>
 
</ion-content>

